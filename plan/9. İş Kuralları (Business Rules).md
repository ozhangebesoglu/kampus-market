[[8. Veri SÃ¶zlÃ¼ÄŸÃ¼ (Data Dictionary)]]
- - - 


> Bu bÃ¶lÃ¼m, sistemin uymasÄ± gereken tÃ¼m iÅŸ kurallarÄ±nÄ±, kÄ±sÄ±tlamalarÄ± ve politikalarÄ± tanÄ±mlar.

---

## 9.1 Genel BakÄ±ÅŸ

Ä°ÅŸ kurallarÄ±, sistemin **nasÄ±l davranmasÄ± gerektiÄŸini** belirleyen kurallar bÃ¼tÃ¼nÃ¼dÃ¼r. Bu kurallar:
- Veri bÃ¼tÃ¼nlÃ¼ÄŸÃ¼nÃ¼ saÄŸlar
- Ä°ÅŸ sÃ¼reÃ§lerini tanÄ±mlar
- GÃ¼venlik politikalarÄ±nÄ± uygular
- KullanÄ±cÄ± deneyimini standartlaÅŸtÄ±rÄ±r

### Kural Kategorileri
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Ä°Å KURALLARI KATEGORÄ°LERÄ°                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚   BR-AUTH       â”‚  â”‚   BR-LIST       â”‚  â”‚   BR-MSG        â”‚                 â”‚
â”‚  â”‚   Kimlik        â”‚  â”‚   Ä°lan          â”‚  â”‚   MesajlaÅŸma    â”‚                 â”‚
â”‚  â”‚   DoÄŸrulama     â”‚  â”‚   YÃ¶netimi      â”‚  â”‚   KurallarÄ±     â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚   BR-PAY        â”‚  â”‚   BR-FAV        â”‚  â”‚   BR-REP        â”‚                 â”‚
â”‚  â”‚   Ã–deme         â”‚  â”‚   Favori        â”‚  â”‚   Raporlama     â”‚                 â”‚
â”‚  â”‚   KurallarÄ±     â”‚  â”‚   KurallarÄ±     â”‚  â”‚   KurallarÄ±     â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚   BR-ADMIN      â”‚  â”‚   BR-SYS        â”‚  â”‚   BR-SEC        â”‚                 â”‚
â”‚  â”‚   Admin         â”‚  â”‚   Sistem        â”‚  â”‚   GÃ¼venlik      â”‚                 â”‚
â”‚  â”‚   KurallarÄ±     â”‚  â”‚   KurallarÄ±     â”‚  â”‚   KurallarÄ±     â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9.2 Kimlik DoÄŸrulama KurallarÄ± (BR-AUTH)

| ID | Kural | AÃ§Ä±klama | Uygulama NoktasÄ± |
|:---|:------|:---------|:-----------------|
| BR-AUTH-01 | Sadece .edu.tr email | Sisteme kayÄ±t yalnÄ±zca `.edu.tr` uzantÄ±lÄ± email ile yapÄ±labilir | KayÄ±t formu, DB constraint |
| BR-AUTH-02 | Email doÄŸrulama zorunlu | KullanÄ±cÄ±, email doÄŸrulamadan kritik iÅŸlem yapamaz | Middleware, RLS |
| BR-AUTH-03 | GÃ¼Ã§lÃ¼ ÅŸifre politikasÄ± | Åifre min 8 karakter, 1 bÃ¼yÃ¼k harf, 1 kÃ¼Ã§Ã¼k harf, 1 rakam iÃ§ermeli | KayÄ±t, Åifre deÄŸiÅŸtirme |
| BR-AUTH-04 | Oturum sÃ¼resi | JWT token 7 gÃ¼n geÃ§erli, refresh token ile uzatÄ±labilir | Auth middleware |
| BR-AUTH-05 | Brute force korumasÄ± | 5 baÅŸarÄ±sÄ±z giriÅŸ denemesi â†’ 15 dakika bekleme sÃ¼resi | Rate limiter |
| BR-AUTH-06 | Åifre sÄ±fÄ±rlama linki | Åifre sÄ±fÄ±rlama linki 1 saat geÃ§erli, tek kullanÄ±mlÄ±k | Auth service |
| BR-AUTH-07 | Email doÄŸrulama linki | Email doÄŸrulama linki 24 saat geÃ§erli, tek kullanÄ±mlÄ±k | Auth service |

### DoÄŸrulama Gereksinimleri Matrisi

| Ä°ÅŸlem | GiriÅŸ Gerekli | Email DoÄŸrulama | Ban KontrolÃ¼ |
|:------|:-------------:|:---------------:|:------------:|
| Ä°lanlarÄ± gÃ¶rÃ¼ntÃ¼leme | âŒ | âŒ | âŒ |
| Ä°lan detayÄ± gÃ¶rme | âŒ | âŒ | âŒ |
| Arama ve filtreleme | âŒ | âŒ | âŒ |
| KayÄ±t olma | âŒ | âŒ | âŒ |
| GiriÅŸ yapma | âŒ | âŒ | âœ… |
| Ä°lan oluÅŸturma | âœ… | âœ… | âœ… |
| Ä°lan dÃ¼zenleme | âœ… | âœ… | âœ… |
| Ä°lan silme | âœ… | âœ… | âœ… |
| Mesaj gÃ¶nderme | âœ… | âœ… | âœ… |
| SatÄ±n alma | âœ… | âœ… | âœ… |
| Favorilere ekleme | âœ… | âœ… | âœ… |
| Ä°lan raporlama | âœ… | âœ… | âœ… |
| Profil dÃ¼zenleme | âœ… | âŒ | âœ… |
| Bildirimleri gÃ¶rme | âœ… | âŒ | âœ… |

### Åifre PolitikasÄ± DetayÄ±
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            ÅÄ°FRE POLÄ°TÄ°KASI                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚  âœ… Gereksinimler:                                                              â”‚
â”‚  â”œâ”€ Minimum 8 karakter                                                         â”‚
â”‚  â”œâ”€ En az 1 bÃ¼yÃ¼k harf (A-Z)                                                   â”‚
â”‚  â”œâ”€ En az 1 kÃ¼Ã§Ã¼k harf (a-z)                                                   â”‚
â”‚  â”œâ”€ En az 1 rakam (0-9)                                                        â”‚
â”‚  â””â”€ Opsiyonel: Ã–zel karakter (!@#$%^&*)                                        â”‚
â”‚                                                                                 â”‚
â”‚  âŒ Yasaklar:                                                                   â”‚
â”‚  â”œâ”€ Email adresi ile aynÄ± olamaz                                               â”‚
â”‚  â”œâ”€ "password", "123456" gibi yaygÄ±n ÅŸifreler                                  â”‚
â”‚  â””â”€ ArdÄ±ÅŸÄ±k karakterler (abc, 123)                                             â”‚
â”‚                                                                                 â”‚
â”‚  ğŸ“Š Regex Pattern:                                                              â”‚
â”‚  ^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d@$!%*?&]{8,}$                        â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9.3 Ä°lan YÃ¶netimi KurallarÄ± (BR-LIST)

| ID | Kural | AÃ§Ä±klama | DeÄŸer/Limit |
|:---|:------|:---------|:------------|
| BR-LIST-01 | BaÅŸlÄ±k uzunluÄŸu | BaÅŸlÄ±k karakter limiti | Min: 5, Max: 100 |
| BR-LIST-02 | AÃ§Ä±klama uzunluÄŸu | AÃ§Ä±klama karakter limiti | Min: 20, Max: 2000 |
| BR-LIST-03 | Fiyat aralÄ±ÄŸÄ± | Kabul edilen fiyat aralÄ±ÄŸÄ± | 0.01 TL - 100.000 TL |
| BR-LIST-04 | FotoÄŸraf sayÄ±sÄ± | Ä°lan baÅŸÄ±na fotoÄŸraf limiti | Min: 1, Max: 5 |
| BR-LIST-05 | FotoÄŸraf boyutu | Tek fotoÄŸraf max boyutu | 5 MB |
| BR-LIST-06 | FotoÄŸraf formatÄ± | Kabul edilen formatlar | JPG, PNG, WebP |
| BR-LIST-07 | Kategori zorunluluÄŸu | Her ilan bir kategoriye ait olmalÄ± | Zorunlu |
| BR-LIST-08 | Durum zorunluluÄŸu | ÃœrÃ¼n durumu belirtilmeli | Zorunlu |
| BR-LIST-09 | Admin onayÄ± | Yeni ilanlar admin onayÄ± gerektirir | Zorunlu |
| BR-LIST-10 | Ä°lan sÃ¼resi | Aktif ilan geÃ§erlilik sÃ¼resi | 30 gÃ¼n |
| BR-LIST-11 | DÃ¼zenleme kuralÄ± | DÃ¼zenlenen ilan tekrar onaya gider | Otomatik |
| BR-LIST-12 | Silme kuralÄ± | SatÄ±lmÄ±ÅŸ ilan silinemez | KÄ±sÄ±tlama |

### Ä°lan Durumu GeÃ§iÅŸ DiyagramÄ± (State Machine)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Ä°LAN DURUM GEÃ‡Ä°Å DÄ°YAGRAMI                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                       â”‚
â”‚                              â”‚  draft   â”‚                                       â”‚
â”‚                              â”‚ (Taslak) â”‚                                       â”‚
â”‚                              â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                                       â”‚
â”‚                                   â”‚                                             â”‚
â”‚                                   â”‚ [KullanÄ±cÄ± "YayÄ±nla" tÄ±klar]               â”‚
â”‚                                   â–¼                                             â”‚
â”‚                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                       â”‚
â”‚                              â”‚ pending  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚                              â”‚(Bekliyor)â”‚                      â”‚               â”‚
â”‚                              â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                      â”‚               â”‚
â”‚                                   â”‚                            â”‚               â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚               â”‚
â”‚                    â”‚              â”‚              â”‚             â”‚               â”‚
â”‚                    â–¼              â”‚              â–¼             â”‚               â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚               â”‚
â”‚              â”‚ rejected â”‚        â”‚        â”‚  active  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚              â”‚(Reddedil)â”‚        â”‚        â”‚(YayÄ±nda) â”‚  [DÃ¼zenleme]           â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                                  â”‚             â”‚                               â”‚
â”‚                                  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚                                  â”‚    â”‚        â”‚        â”‚        â”‚            â”‚
â”‚                                  â”‚    â–¼        â–¼        â–¼        â–¼            â”‚
â”‚                                  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚                                  â”‚ â”‚ sold â”‚ â”‚expir-â”‚ â”‚remov-â”‚ â”‚ silme â”‚      â”‚
â”‚                                  â”‚ â”‚(SatÄ±l)â”‚ â”‚ ed   â”‚ â”‚ ed   â”‚ â”‚(KullanÄ±cÄ±)   â”‚
â”‚                                  â”‚ â””â”€â”€â”€â”€â”€â”€â”˜ â”‚(Doldu)â”‚ â”‚(Admin)â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                  â”‚          â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                  â”‚                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚  ğŸ“Œ GEÃ‡Ä°Å KURALLARI:                                                          â”‚
â”‚  â€¢ draft â†’ pending: KullanÄ±cÄ± ilanÄ± yayÄ±nlar                                  â”‚
â”‚  â€¢ pending â†’ active: Admin onaylar                                            â”‚
â”‚  â€¢ pending â†’ rejected: Admin reddeder (sebep zorunlu)                         â”‚
â”‚  â€¢ active â†’ sold: Ã–deme tamamlanÄ±r                                            â”‚
â”‚  â€¢ active â†’ expired: 30 gÃ¼n doldu (otomatik)                                  â”‚
â”‚  â€¢ active â†’ removed: Admin kaldÄ±rÄ±r (sebep zorunlu)                           â”‚
â”‚  â€¢ active â†’ pending: KullanÄ±cÄ± dÃ¼zenler                                       â”‚
â”‚  â€¢ active â†’ silindi: KullanÄ±cÄ± siler (soft delete)                            â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### YasaklÄ± ÃœrÃ¼n Kategorileri

| Kategori | Ã–rnekler | Kural ID |
|:---------|:---------|:---------|
| ğŸš« YasadÄ±ÅŸÄ± ÃœrÃ¼nler | UyuÅŸturucu, silah, Ã§alÄ±ntÄ± eÅŸya | BR-LIST-13 |
| ğŸš« YetiÅŸkin Ä°Ã§erik | Pornografik materyal | BR-LIST-14 |
| ğŸš« Tehlikeli Maddeler | PatlayÄ±cÄ±, yanÄ±cÄ±, kimyasal | BR-LIST-15 |
| ğŸš« TÄ±bbi ÃœrÃ¼nler | ReÃ§eteli ilaÃ§lar, tÄ±bbi cihazlar | BR-LIST-16 |
| ğŸš« CanlÄ± Hayvan | Evcil hayvan satÄ±ÅŸÄ± | BR-LIST-17 |
| ğŸš« Taklit ÃœrÃ¼nler | Sahte marka, korsan yazÄ±lÄ±m | BR-LIST-18 |
| ğŸš« KiÅŸisel Belgeler | Kimlik, diploma, sertifika | BR-LIST-19 |
| ğŸš« Finansal AraÃ§lar | Kredi kartÄ±, banka hesabÄ± | BR-LIST-20 |

---

## 9.4 MesajlaÅŸma KurallarÄ± (BR-MSG)

| ID | Kural | AÃ§Ä±klama | Uygulama |
|:---|:------|:---------|:---------|
| BR-MSG-01 | Kendi ilanÄ±na mesaj yasaÄŸÄ± | KullanÄ±cÄ± kendi ilanÄ±na mesaj gÃ¶nderemez | API validation |
| BR-MSG-02 | Tek konuÅŸma kuralÄ± | Bir alÄ±cÄ±, bir ilan iÃ§in yalnÄ±zca bir konuÅŸma baÅŸlatabilir | DB unique constraint |
| BR-MSG-03 | BoÅŸ mesaj yasaÄŸÄ± | BoÅŸ veya sadece boÅŸluk iÃ§eren mesaj gÃ¶nderilemez | Form validation |
| BR-MSG-04 | Mesaj uzunluÄŸu | Mesaj max 2000 karakter olabilir | Form validation |
| BR-MSG-05 | Aktif ilan ÅŸartÄ± | Sadece aktif ilanlara mesaj gÃ¶nderilebilir | API validation |
| BR-MSG-06 | Okundu bildirimi | Mesajlar okunduÄŸunda otomatik iÅŸaretlenir | Realtime trigger |
| BR-MSG-07 | Bildirim gÃ¶nderimi | Yeni mesajda karÅŸÄ± tarafa bildirim gider | Event handler |

### MesajlaÅŸma AkÄ±ÅŸ KurallarÄ±
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         MESAJLAÅMA AKIÅ KURALLARI                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚  1ï¸âƒ£ Ä°LK MESAJ (KonuÅŸma BaÅŸlatma)                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ KoÅŸullar:                                                               â”‚   â”‚
â”‚  â”‚ â€¢ Ä°lan aktif durumda olmalÄ±                                             â”‚   â”‚
â”‚  â”‚ â€¢ KullanÄ±cÄ± ilan sahibi olmamalÄ±                                        â”‚   â”‚
â”‚  â”‚ â€¢ KullanÄ±cÄ± doÄŸrulanmÄ±ÅŸ olmalÄ±                                          â”‚   â”‚
â”‚  â”‚ â€¢ KullanÄ±cÄ± banlÄ± olmamalÄ±                                              â”‚   â”‚
â”‚  â”‚                                                                         â”‚   â”‚
â”‚  â”‚ Ä°ÅŸlem:                                                                  â”‚   â”‚
â”‚  â”‚ â€¢ Yeni conversation oluÅŸturulur                                         â”‚   â”‚
â”‚  â”‚ â€¢ Ä°lk mesaj kaydedilir                                                  â”‚   â”‚
â”‚  â”‚ â€¢ SatÄ±cÄ±ya bildirim gÃ¶nderilir                                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                 â”‚
â”‚  2ï¸âƒ£ DEVAM EDEN MESAJLAÅMA                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ KoÅŸullar:                                                               â”‚   â”‚
â”‚  â”‚ â€¢ Mevcut konuÅŸma olmalÄ±                                                 â”‚   â”‚
â”‚  â”‚ â€¢ KullanÄ±cÄ± konuÅŸmanÄ±n tarafÄ± olmalÄ± (buyer veya seller)               â”‚   â”‚
â”‚  â”‚                                                                         â”‚   â”‚
â”‚  â”‚ Ä°ÅŸlem:                                                                  â”‚   â”‚
â”‚  â”‚ â€¢ Mesaj kaydedilir                                                      â”‚   â”‚
â”‚  â”‚ â€¢ KarÅŸÄ± tarafa realtime iletilir                                        â”‚   â”‚
â”‚  â”‚ â€¢ Bildirim gÃ¶nderilir                                                   â”‚   â”‚
â”‚  â”‚ â€¢ conversation.last_message_at gÃ¼ncellenir                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                 â”‚
â”‚  3ï¸âƒ£ Ä°LAN SATILDIÄINDA                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â€¢ Mevcut konuÅŸmalar korunur (geÃ§miÅŸ iÃ§in)                               â”‚   â”‚
â”‚  â”‚ â€¢ Yeni mesaj gÃ¶nderilebilir (teslimat koordinasyonu)                    â”‚   â”‚
â”‚  â”‚ â€¢ Yeni konuÅŸma baÅŸlatÄ±lamaz                                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9.5 Ã–deme KurallarÄ± (BR-PAY)

| ID | Kural | AÃ§Ä±klama | Uygulama |
|:---|:------|:---------|:---------|
| BR-PAY-01 | Kendi ilanÄ±nÄ± satÄ±n alma yasaÄŸÄ± | KullanÄ±cÄ± kendi ilanÄ±nÄ± satÄ±n alamaz | API validation |
| BR-PAY-02 | Aktif ilan ÅŸartÄ± | Sadece aktif ilanlar satÄ±n alÄ±nabilir | API validation |
| BR-PAY-03 | 3D Secure zorunluluÄŸu | TÃ¼m Ã¶demeler 3D Secure ile yapÄ±lmalÄ± | Iyzico config |
| BR-PAY-04 | Tek para birimi | Sadece TL ile Ã¶deme kabul edilir | Iyzico config |
| BR-PAY-05 | Otomatik durum deÄŸiÅŸikliÄŸi | BaÅŸarÄ±lÄ± Ã¶deme sonrasÄ± ilan otomatik "sold" olur | Transaction handler |
| BR-PAY-06 | Bildirim zorunluluÄŸu | Ã–deme sonrasÄ± her iki tarafa bildirim gÃ¶nderilir | Event handler |
| BR-PAY-07 | Kart bilgisi saklanmaz | Kart bilgileri sistemde saklanmaz, Iyzico'da iÅŸlenir | Security policy |
| BR-PAY-08 | Ä°ade sÃ¼resi | Ä°ade talebi 24 saat iÃ§inde yapÄ±labilir | Business policy |
| BR-PAY-09 | Ä°ade onayÄ± | Ä°ade talepleri admin onayÄ± gerektirir | Workflow |

### Ã–deme AkÄ±ÅŸ KurallarÄ±
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            Ã–DEME AKIÅ KURALLARI                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚  âœ… Ã–DEME Ã–NCESÄ° KONTROLLER                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 1. Ä°lan durumu = 'active' mi?                     â†’ HayÄ±r: Hata        â”‚   â”‚
â”‚  â”‚ 2. AlÄ±cÄ± = SatÄ±cÄ± mÄ±?                             â†’ Evet: Hata         â”‚   â”‚
â”‚  â”‚ 3. AlÄ±cÄ± email doÄŸrulanmÄ±ÅŸ mÄ±?                    â†’ HayÄ±r: Hata        â”‚   â”‚
â”‚  â”‚ 4. AlÄ±cÄ± banlÄ± mÄ±?                                â†’ Evet: Hata         â”‚   â”‚
â”‚  â”‚ 5. TÃ¼m kontroller geÃ§ti mi?                       â†’ Evet: Ã–demeye geÃ§  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                 â”‚
â”‚  ğŸ’³ Ã–DEME Ä°ÅLEMÄ°                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 1. Transaction kaydÄ± oluÅŸtur (status: 'pending')                        â”‚   â”‚
â”‚  â”‚ 2. Iyzico'ya Ã¶deme isteÄŸi gÃ¶nder                                        â”‚   â”‚
â”‚  â”‚ 3. 3D Secure yÃ¶nlendirmesi al                                           â”‚   â”‚
â”‚  â”‚ 4. KullanÄ±cÄ±yÄ± 3D Secure'a yÃ¶nlendir                                    â”‚   â”‚
â”‚  â”‚ 5. Callback'i bekle                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                 â”‚
â”‚  âœ… BAÅARILI Ã–DEME SONRASI                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 1. Transaction.status = 'completed'                                     â”‚   â”‚
â”‚  â”‚ 2. Listing.status = 'sold'                                              â”‚   â”‚
â”‚  â”‚ 3. Shipment kaydÄ± oluÅŸtur (delivery_type belirle)                       â”‚   â”‚
â”‚  â”‚ 4. SatÄ±cÄ±ya bildirim + email gÃ¶nder                                     â”‚   â”‚
â”‚  â”‚ 5. AlÄ±cÄ±ya onay mesajÄ± gÃ¶ster                                           â”‚   â”‚
â”‚  â”‚ 6. Para ESCROW'da bekletilir (teslimat onayÄ±na kadar)                   â”‚   â”‚
â”‚  â”‚ 7. DiÄŸer konuÅŸmalara "ilan satÄ±ldÄ±" bildirimi (opsiyonel)              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                 â”‚
â”‚  âŒ BAÅARISIZ Ã–DEME SONRASI                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 1. Transaction.status = 'failed'                                        â”‚   â”‚
â”‚  â”‚ 2. Transaction.error_message = [hata detayÄ±]                            â”‚   â”‚
â”‚  â”‚ 3. Listing.status deÄŸiÅŸmez ('active' kalÄ±r)                             â”‚   â”‚
â”‚  â”‚ 4. KullanÄ±cÄ±ya hata mesajÄ± gÃ¶ster                                       â”‚   â”‚
â”‚  â”‚ 5. Tekrar deneme seÃ§eneÄŸi sun                                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9.6 Teslimat KurallarÄ± (BR-DEL)

| ID | Kural | AÃ§Ä±klama | Uygulama |
|:---|:------|:---------|:---------|
| BR-DEL-01 | Konum bazlÄ± teslimat | Sistem, alÄ±cÄ±-satÄ±cÄ± konumuna gÃ¶re teslimat yÃ¶ntemi Ã¶nerir | Otomatik hesaplama |
| BR-DEL-02 | AynÄ± kampÃ¼s | AynÄ± kampÃ¼ste â†’ Elden teslim Ã¶nerisi | VarsayÄ±lan seÃ§enek |
| BR-DEL-03 | AynÄ± Ã¼ni farklÄ± kampÃ¼s | Elden veya kargo seÃ§imi sunulur | KullanÄ±cÄ± tercihi |
| BR-DEL-04 | FarklÄ± ÅŸehir | FarklÄ± ÅŸehirlerde â†’ Sadece kargo | Zorunlu kargo |
| BR-DEL-05 | FotoÄŸraf zorunluluÄŸu | Kargoda satÄ±cÄ±, Ã¼rÃ¼n + paket fotoÄŸrafÄ± Ã§ekmeli | GÃ¶nderi Ã¶ncesi |
| BR-DEL-06 | Teslimat kodu | Her gÃ¶nderi iÃ§in 8 haneli benzersiz kod Ã¼retilir | Sistem tarafÄ±ndan |
| BR-DEL-07 | Kargo takip | SatÄ±cÄ± takip numarasÄ±nÄ± sisteme girmeli | Manuel giriÅŸ |
| BR-DEL-08 | AlÄ±cÄ± onay sÃ¼resi | Teslimattan sonra 24 saat iÃ§inde onay | HatÄ±rlatma gÃ¶nderilir |
| BR-DEL-09 | Otomatik onay | 72 saat sessizlik â†’ Otomatik onay ve para aktarÄ±mÄ± | Cron job |
| BR-DEL-10 | Ä°tiraz sÃ¼resi | 72 saat iÃ§inde itiraz aÃ§Ä±labilir | Deadline |
| BR-DEL-11 | Elden Ã§ift onay | Elden teslimde satÄ±cÄ± + alÄ±cÄ± onayÄ± gerekli | Her iki taraf |
| BR-DEL-12 | Escrow mantÄ±ÄŸÄ± | Para, teslimat onaylanana kadar platformda kalÄ±r | Iyzico marketplace |

### Teslimat Tipi Karar Matrisi

| SatÄ±cÄ± Konumu | AlÄ±cÄ± Konumu | Teslimat SeÃ§enekleri |
|:--------------|:-------------|:---------------------|
| KampÃ¼s A | KampÃ¼s A (AynÄ±) | âœ… Elden (Ã–nerilen) |
| KampÃ¼s A | KampÃ¼s B (AynÄ± Ãœni) | âœ… Elden VEYA ğŸ“¦ Kargo |
| Ä°stanbul | Ankara | ğŸ“¦ Kargo (Zorunlu) |
| Åehir X | Åehir Y | ğŸ“¦ Kargo (Zorunlu) |

### Kargo Åirketi SeÃ§im Ã–nceliÄŸi

| Ã–ncelik | KoÅŸul | SeÃ§im |
|:--------|:------|:------|
| 1 | SatÄ±cÄ± Ã¼niversitesinin anlaÅŸmalÄ± kargosu var | Ãœni anlaÅŸmalÄ± kargo |
| 2 | Ãœni anlaÅŸmasÄ± yok ama platform anlaÅŸmasÄ± var | Platform anlaÅŸmalÄ± kargo |
| 3 | Her iki anlaÅŸma da yok | KullanÄ±cÄ± seÃ§imi (liste) |

### Teslimat AkÄ±ÅŸ DiyagramÄ±
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         TESLÄ°MAT AKIÅ KURALLARI                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                              KARGO Ä°LE TESLÄ°MAT                                 â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                                 â”‚
â”‚  SATICI ADIMLARI:                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 1. ÃœrÃ¼nÃ¼ hazÄ±rla                                                        â”‚   â”‚
â”‚  â”‚ 2. ÃœrÃ¼n + kutu (varsa) fotoÄŸrafÄ± Ã§ek                                   â”‚   â”‚
â”‚  â”‚ 3. Paketleme fotoÄŸrafÄ± Ã§ek                                              â”‚   â”‚
â”‚  â”‚ 4. FotoÄŸraflarÄ± sisteme yÃ¼kle                                           â”‚   â”‚
â”‚  â”‚ 5. Sistemden 8 haneli TESLÄ°MAT KODU al                                  â”‚   â”‚
â”‚  â”‚ 6. Kargo ÅŸubesine git                                                   â”‚   â”‚
â”‚  â”‚ 7. Kargoya teslim et (kodu kaydet)                                      â”‚   â”‚
â”‚  â”‚ 8. Takip numarasÄ±nÄ± sisteme gir                                         â”‚   â”‚
â”‚  â”‚ 9. "Kargoya Verdim" butonuna tÄ±kla                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                 â”‚
â”‚  ALICI ADIMLARI:                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 1. Kargo takip et (sistemden link)                                      â”‚   â”‚
â”‚  â”‚ 2. Kargoyu teslim al                                                    â”‚   â”‚
â”‚  â”‚ 3. Paketi aÃ§ ve Ã¼rÃ¼nÃ¼ kontrol et                                        â”‚   â”‚
â”‚  â”‚ 4. 24 SAAT Ä°Ã‡Ä°NDE:                                                      â”‚   â”‚
â”‚  â”‚    â”œâ”€ Sorun yok â†’ "Teslim AldÄ±m ve OnaylÄ±yorum" âœ“                      â”‚   â”‚
â”‚  â”‚    â””â”€ Sorun var â†’ "Ä°tiraz Et" (fotoÄŸraf + aÃ§Ä±klama ile)                â”‚   â”‚
â”‚  â”‚                                                                         â”‚   â”‚
â”‚  â”‚ âš ï¸ 72 saat iÃ§inde iÅŸlem yapÄ±lmazsa â†’ OTOMATÄ°K ONAY                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                 â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                             ELDEN TESLÄ°MAT                                      â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                                 â”‚
â”‚  BULUÅMA:                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 1. MesajlaÅŸarak yer ve zaman belirle                                    â”‚   â”‚
â”‚  â”‚ 2. KampÃ¼s iÃ§inde gÃ¼venli bir yer seÃ§ (kÃ¼tÃ¼phane Ã¶nÃ¼, yemekhane vb.)    â”‚   â”‚
â”‚  â”‚ 3. BuluÅŸma gerÃ§ekleÅŸir                                                  â”‚   â”‚
â”‚  â”‚ 4. AlÄ±cÄ± Ã¼rÃ¼nÃ¼ kontrol eder                                             â”‚   â”‚
â”‚  â”‚                                                                         â”‚   â”‚
â”‚  â”‚ ONAY SÃœRECÄ°:                                                            â”‚   â”‚
â”‚  â”‚ â€¢ SatÄ±cÄ±: "Elden Teslim Ettim" âœ“                                        â”‚   â”‚
â”‚  â”‚ â€¢ AlÄ±cÄ±: "Elden Teslim AldÄ±m" âœ“                                         â”‚   â”‚
â”‚  â”‚ â€¢ HER Ä°KÄ° ONAY GEREKLÄ° â†’ Para satÄ±cÄ±ya aktarÄ±lÄ±r                        â”‚   â”‚
â”‚  â”‚                                                                         â”‚   â”‚
â”‚  â”‚ âš ï¸ Tek taraflÄ± onay â†’ DiÄŸer tarafa hatÄ±rlatma gider                     â”‚   â”‚
â”‚  â”‚ âš ï¸ Ä°tiraz durumunda â†’ Admin mesaj geÃ§miÅŸini inceler                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                 â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                              Ä°TÄ°RAZ SÃœRECÄ°                                      â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 1. AlÄ±cÄ± itiraz aÃ§ar (sebep + fotoÄŸraf)                                 â”‚   â”‚
â”‚  â”‚ 2. Shipment.status = 'disputed'                                         â”‚   â”‚
â”‚  â”‚ 3. Her iki tarafa bildirim gÃ¶nderilir                                   â”‚   â”‚
â”‚  â”‚ 4. Admin inceleme baÅŸlatÄ±r:                                             â”‚   â”‚
â”‚  â”‚    â”œâ”€ SatÄ±cÄ± fotoÄŸraflarÄ±nÄ± inceler                                     â”‚   â”‚
â”‚  â”‚    â”œâ”€ AlÄ±cÄ± fotoÄŸraflarÄ±nÄ± inceler                                      â”‚   â”‚
â”‚  â”‚    â”œâ”€ Mesaj geÃ§miÅŸini inceler                                           â”‚   â”‚
â”‚  â”‚    â””â”€ Karar verir:                                                      â”‚   â”‚
â”‚  â”‚        â”œâ”€ refund_buyer â†’ Para alÄ±cÄ±ya iade                             â”‚   â”‚
â”‚  â”‚        â”œâ”€ release_seller â†’ Para satÄ±cÄ±ya aktarÄ±lÄ±r                     â”‚   â”‚
â”‚  â”‚        â””â”€ partial_refund â†’ KÄ±smi iade (anlaÅŸmazlÄ±k durumunda)          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Teslimat Zaman Ã‡izelgesi

| Olay | SÃ¼re | Aksiyon |
|:-----|:-----|:--------|
| Ã–deme tamamlandÄ± | T+0 | Shipment oluÅŸturulur |
| SatÄ±cÄ± kargoya vermedi | T+3 gÃ¼n | HatÄ±rlatma gÃ¶nderilir |
| SatÄ±cÄ± hala gÃ¶ndermedi | T+7 gÃ¼n | Admin uyarÄ±sÄ± + alÄ±cÄ±ya iptal seÃ§eneÄŸi |
| Kargo teslim edildi | T+X | AlÄ±cÄ±ya onay bildirimi |
| AlÄ±cÄ± sessiz | T+X+24 saat | Ä°lk hatÄ±rlatma |
| AlÄ±cÄ± hala sessiz | T+X+48 saat | Ä°kinci hatÄ±rlatma |
| AlÄ±cÄ± hala sessiz | T+X+72 saat | Otomatik onay, para aktarÄ±mÄ± |

---

## 9.7 Favori KurallarÄ± (BR-FAV)

| ID | Kural | AÃ§Ä±klama | Uygulama |
|:---|:------|:---------|:---------|
| BR-FAV-01 | Tekil favori | AynÄ± ilan sadece bir kez favorilere eklenebilir | DB unique constraint |
| BR-FAV-02 | Toggle mantÄ±ÄŸÄ± | Favori butonu toggle ÅŸeklinde Ã§alÄ±ÅŸÄ±r (ekle/Ã§Ä±kar) | UI logic |
| BR-FAV-03 | Kendi ilanÄ±nÄ± favorileme | KullanÄ±cÄ± kendi ilanÄ±nÄ± favorilere ekleyebilir | Ä°zin verilir |
| BR-FAV-04 | SatÄ±lan ilan bildirimi | Favori ilan satÄ±ldÄ±ÄŸÄ±nda kullanÄ±cÄ±ya bildirim gider | Event handler |
| BR-FAV-05 | Silinen ilan | Ä°lan silindiÄŸinde favorilerden de kaldÄ±rÄ±lÄ±r | Cascade delete |

---

## 9.8 Raporlama KurallarÄ± (BR-REP)

| ID | Kural | AÃ§Ä±klama | Uygulama |
|:---|:------|:---------|:---------|
| BR-REP-01 | Tek rapor hakkÄ± | KullanÄ±cÄ± aynÄ± ilanÄ± sadece bir kez raporlayabilir | DB unique constraint |
| BR-REP-02 | Kendi ilanÄ±nÄ± raporlama | KullanÄ±cÄ± kendi ilanÄ±nÄ± raporlayamaz | API validation |
| BR-REP-03 | Sebep zorunluluÄŸu | Rapor sebep seÃ§imi zorunludur | Form validation |
| BR-REP-04 | Admin bildirimi | Yeni raporda admin'e bildirim gider | Event handler |
| BR-REP-05 | Rapor durumlarÄ± | Pending â†’ Reviewed â†’ Resolved/Dismissed | Status workflow |

### Rapor Sebepleri ve Aksiyonlar

| Sebep | AÃ§Ä±klama | OlasÄ± Admin Aksiyonu |
|:------|:---------|:---------------------|
| `spam` | Spam iÃ§erik, tekrarlÄ± ilan | Ä°lanÄ± kaldÄ±r, uyarÄ± ver |
| `inappropriate` | Uygunsuz iÃ§erik/fotoÄŸraf | Ä°lanÄ± kaldÄ±r, uyarÄ±/ban |
| `fraud` | DolandÄ±rÄ±cÄ±lÄ±k ÅŸÃ¼phesi | Ä°lanÄ± kaldÄ±r, kullanÄ±cÄ±yÄ± banla |
| `wrong_category` | YanlÄ±ÅŸ kategori | Ä°lanÄ± reddet, dÃ¼zeltme iste |
| `duplicate` | Tekrar ilan | Birini kaldÄ±r |
| `other` | DiÄŸer | Duruma gÃ¶re deÄŸerlendir |

---

## 9.9 Admin KurallarÄ± (BR-ADMIN)

| ID | Kural | AÃ§Ä±klama | Uygulama |
|:---|:------|:---------|:---------|
| BR-ADMIN-01 | Admin atama | Admin yetkisi sadece veritabanÄ±ndan atanabilir | DB manual update |
| BR-ADMIN-02 | Ret sebebi zorunlu | Ä°lan reddetmede sebep yazmak zorunlu | Form validation |
| BR-ADMIN-03 | KaldÄ±rma sebebi zorunlu | Aktif ilan kaldÄ±rmada sebep yazmak zorunlu | Form validation |
| BR-ADMIN-04 | Ban sebebi zorunlu | KullanÄ±cÄ± banlamada sebep yazmak zorunlu | Form validation |
| BR-ADMIN-05 | Ban sÃ¼resi | Ban sÃ¼reli veya sÃ¼resiz olabilir | Admin kararÄ± |
| BR-ADMIN-06 | Kategori silme | Ä°lanÄ± olan kategori silinemez | API validation |
| BR-ADMIN-07 | Log tutma | TÃ¼m admin iÅŸlemleri loglanÄ±r | Audit log |

### Admin Ä°ÅŸlem Yetki Matrisi

| Ä°ÅŸlem | Junior Admin | Senior Admin | Super Admin |
|:------|:------------:|:------------:|:-----------:|
| Ä°lan onaylama | âœ… | âœ… | âœ… |
| Ä°lan reddetme | âœ… | âœ… | âœ… |
| Ä°lan kaldÄ±rma | âŒ | âœ… | âœ… |
| Rapor inceleme | âœ… | âœ… | âœ… |
| KullanÄ±cÄ± banlama (geÃ§ici) | âŒ | âœ… | âœ… |
| KullanÄ±cÄ± banlama (kalÄ±cÄ±) | âŒ | âŒ | âœ… |
| Kategori yÃ¶netimi | âŒ | âœ… | âœ… |
| Admin atama | âŒ | âŒ | âœ… |

> **Not:** MVP'de tek admin seviyesi olacak, yukarÄ±daki matris gelecek sÃ¼rÃ¼mler iÃ§in.

---

## 9.10 Sistem KurallarÄ± (BR-SYS)

| ID | Kural | AÃ§Ä±klama | Uygulama |
|:---|:------|:---------|:---------|
| BR-SYS-01 | Ä°lan sÃ¼resi kontrolÃ¼ | Her gÃ¼n 00:00'da expire kontrolÃ¼ yapÄ±lÄ±r | Cron job |
| BR-SYS-02 | SÃ¼re uyarÄ±sÄ± | 3 gÃ¼n kala kullanÄ±cÄ±ya uyarÄ± gÃ¶nderilir | Cron job |
| BR-SYS-03 | Bildirim saklama | Bildirimler 90 gÃ¼n saklanÄ±r | Cleanup job |
| BR-SYS-04 | Session temizliÄŸi | Expire olmuÅŸ session'lar haftalÄ±k temizlenir | Cron job |
| BR-SYS-05 | Soft delete | Silinen veriler soft delete ile iÅŸaretlenir | DB policy |
| BR-SYS-06 | Timezone | TÃ¼m tarihler UTC olarak saklanÄ±r | DB config |

### ZamanlanmÄ±ÅŸ GÃ¶revler
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ZAMANLANMIÅ GÃ–REVLER                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚  â° 00:00 (Her gÃ¼n)                                                             â”‚
â”‚  â””â”€ check_expired_listings()                                                   â”‚
â”‚     â€¢ expires_at < NOW() olan ilanlarÄ± bul                                     â”‚
â”‚     â€¢ status = 'expired' yap                                                   â”‚
â”‚     â€¢ KullanÄ±cÄ±lara bildirim gÃ¶nder                                            â”‚
â”‚                                                                                 â”‚
â”‚  â° 09:00 (Her gÃ¼n)                                                             â”‚
â”‚  â””â”€ send_expiry_warnings()                                                     â”‚
â”‚     â€¢ 3 gÃ¼n iÃ§inde dolacak ilanlarÄ± bul                                        â”‚
â”‚     â€¢ KullanÄ±cÄ±lara uyarÄ± gÃ¶nder                                               â”‚
â”‚                                                                                 â”‚
â”‚  â° 03:00 (Her Pazar)                                                           â”‚
â”‚  â””â”€ cleanup_old_data()                                                         â”‚
â”‚     â€¢ 90 gÃ¼nden eski bildirimleri sil                                          â”‚
â”‚     â€¢ Expire olmuÅŸ session'larÄ± temizle                                        â”‚
â”‚     â€¢ Orphan fotoÄŸraflarÄ± kontrol et                                           â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9.11 GÃ¼venlik KurallarÄ± (BR-SEC)

| ID | Kural | AÃ§Ä±klama | Uygulama |
|:---|:------|:---------|:---------|
| BR-SEC-01 | HTTPS zorunlu | TÃ¼m trafik HTTPS Ã¼zerinden | Server config |
| BR-SEC-02 | SQL Injection korumasÄ± | Prepared statements kullanÄ±lÄ±r | Supabase SDK |
| BR-SEC-03 | XSS korumasÄ± | User input sanitize edilir | Input validation |
| BR-SEC-04 | CSRF korumasÄ± | CSRF token kullanÄ±lÄ±r | Middleware |
| BR-SEC-05 | Rate limiting | API istekleri limitlenir | 100 req/dakika/IP |
| BR-SEC-06 | RLS politikalarÄ± | Row Level Security aktif | Supabase RLS |
| BR-SEC-07 | Kart bilgisi | Kart bilgileri asla saklanmaz | PCI-DSS |
| BR-SEC-08 | Åifre hashleme | Åifreler bcrypt ile hashlenir | Supabase Auth |
| BR-SEC-09 | Dosya validasyonu | YÃ¼klenen dosyalar doÄŸrulanÄ±r | Upload handler |

### Row Level Security (RLS) PolitikalarÄ±
```sql
-- KullanÄ±cÄ±lar: Herkes okuyabilir, sadece kendi kaydÄ±nÄ± gÃ¼ncelleyebilir
CREATE POLICY "Users are viewable by everyone" ON users
    FOR SELECT USING (true);

CREATE POLICY "Users can update own record" ON users
    FOR UPDATE USING (auth.uid() = id);

-- Ä°lanlar: Aktif ilanlar herkese aÃ§Ä±k
CREATE POLICY "Active listings are viewable" ON listings
    FOR SELECT USING (status = 'active' OR user_id = auth.uid());

CREATE POLICY "Users can insert own listings" ON listings
    FOR INSERT WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Users can update own listings" ON listings
    FOR UPDATE USING (auth.uid() = user_id);

-- Mesajlar: Sadece konuÅŸmanÄ±n taraflarÄ± gÃ¶rebilir
CREATE POLICY "Users can view own messages" ON messages
    FOR SELECT USING (
        EXISTS (
            SELECT 1 FROM conversations c
            WHERE c.id = conversation_id
            AND (c.buyer_id = auth.uid() OR c.seller_id = auth.uid())
        )
    );

-- Favoriler: Sadece kendi favorileri
CREATE POLICY "Users can manage own favorites" ON favorites
    FOR ALL USING (auth.uid() = user_id);

-- Bildirimler: Sadece kendi bildirimleri
CREATE POLICY "Users can view own notifications" ON notifications
    FOR SELECT USING (auth.uid() = user_id);
```

---

## 9.12 Ã–zet Tablosu

| Kategori | Kural SayÄ±sÄ± | Kritik Kurallar |
|:---------|:------------:|:----------------|
| BR-AUTH | 7 | .edu.tr zorunluluÄŸu, Email doÄŸrulama |
| BR-LIST | 20 | Admin onayÄ±, 30 gÃ¼n sÃ¼re, YasaklÄ± Ã¼rÃ¼nler |
| BR-MSG | 7 | Kendi ilanÄ±na mesaj yasaÄŸÄ±, Tek konuÅŸma |
| BR-PAY | 9 | 3D Secure, Otomatik durum deÄŸiÅŸikliÄŸi |
| BR-FAV | 5 | Tekil favori, Toggle mantÄ±ÄŸÄ± |
| BR-REP | 5 | Tek rapor hakkÄ±, Sebep zorunluluÄŸu |
| BR-ADMIN | 7 | DB'den admin atama, Log tutma |
| BR-SYS | 6 | Cron jobs, Soft delete |
| BR-SEC | 9 | RLS, Rate limiting, HTTPS |
| **TOPLAM** | **75** | - |
[[10. KullanÄ±cÄ± Hikayeleri (User Stories)]] 