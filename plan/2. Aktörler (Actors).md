[[1. Problem TanÄ±mÄ± ve PaydaÅŸ Analizi]]

> Bu bÃ¶lÃ¼m, sistemle etkileÅŸime giren tÃ¼m aktÃ¶rleri, rollerini, yetkilerini ve sorumluluklarÄ±nÄ± tanÄ±mlar.

---

## 2.1 AktÃ¶r TanÄ±mÄ±

AktÃ¶r, sistemle etkileÅŸime giren ve sistemden bir deÄŸer elde eden kiÅŸi, sistem veya harici servistir. KampÃ¼sMarket sisteminde aktÃ¶rler **birincil** ve **ikincil** olmak Ã¼zere ikiye ayrÄ±lÄ±r.

---

## 2.2 AktÃ¶r SÄ±nÄ±flandÄ±rmasÄ±
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         AKTÃ–R SINIFLANDIRMASI                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      BÄ°RÄ°NCÄ°L AKTÃ–RLER                              â”‚   â”‚
â”‚  â”‚                  (Sistemden deÄŸer elde eden)                        â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚   ğŸ‘¤ Misafir KullanÄ±cÄ±    â†’  Sisteme kayÄ±t olmamÄ±ÅŸ ziyaretÃ§i       â”‚   â”‚
â”‚  â”‚   ğŸ“ Ã–ÄŸrenci              â†’  DoÄŸrulanmÄ±ÅŸ Ã¼niversite Ã¶ÄŸrencisi      â”‚   â”‚
â”‚  â”‚   ğŸ›¡ï¸ Admin                â†’  Sistem yÃ¶neticisi                     â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      Ä°KÄ°NCÄ°L AKTÃ–RLER                               â”‚   â”‚
â”‚  â”‚                 (Sisteme hizmet saÄŸlayan)                           â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚   âš™ï¸ Sistem               â†’  Otomatik iÅŸlemler (Cron, Trigger)     â”‚   â”‚
â”‚  â”‚   ğŸ’³ Iyzico               â†’  Ã–deme iÅŸleme servisi                  â”‚   â”‚
â”‚  â”‚   ğŸ“§ Email Servisi        â†’  Transactional email gÃ¶nderimi         â”‚   â”‚
â”‚  â”‚   ğŸ—„ï¸ Supabase             â†’  VeritabanÄ± ve Auth servisi            â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2.3 Birincil AktÃ¶rler

### 2.3.1 ğŸ‘¤ Misafir KullanÄ±cÄ± (Guest User)

#### Genel Bilgiler

| Ã–zellik | DeÄŸer |
|:--------|:------|
| **TanÄ±m** | Sisteme kayÄ±t olmamÄ±ÅŸ veya giriÅŸ yapmamÄ±ÅŸ ziyaretÃ§i |
| **Hedef** | Ä°lanlarÄ± incelemek, sisteme kayÄ±t olmak |
| **Kimlik DoÄŸrulama** | Yok |
| **Oturum** | Anonim |

#### Yetkiler ve KÄ±sÄ±tlamalar

| Yetki | Durum | AÃ§Ä±klama |
|:------|:-----:|:---------|
| Ä°lanlarÄ± gÃ¶rÃ¼ntÃ¼leme | âœ… | TÃ¼m aktif ilanlarÄ± gÃ¶rebilir |
| Ä°lan detayÄ± gÃ¶rme | âœ… | FotoÄŸraf, aÃ§Ä±klama, fiyat |
| Arama ve filtreleme | âœ… | Kategori, fiyat, durum filtresi |
| KayÄ±t olma | âœ… | .edu.tr email ile |
| GiriÅŸ yapma | âœ… | Mevcut hesap ile |
| Ä°lan oluÅŸturma | âŒ | GiriÅŸ gerekli |
| Mesaj gÃ¶nderme | âŒ | GiriÅŸ gerekli |
| SatÄ±n alma | âŒ | GiriÅŸ gerekli |
| Favorilere ekleme | âŒ | GiriÅŸ gerekli |
| Ä°lan raporlama | âŒ | GiriÅŸ gerekli |

#### KullanÄ±m SenaryolarÄ±
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              MÄ°SAFÄ°R KULLANICI JOURNEY                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  1. Ana sayfaya gelir                                       â”‚
â”‚     â”‚                                                       â”‚
â”‚     â–¼                                                       â”‚
â”‚  2. Ä°lanlarÄ± inceler                                        â”‚
â”‚     â”‚                                                       â”‚
â”‚     â”œâ”€â”€â–º Arama yapar                                        â”‚
â”‚     â”‚                                                       â”‚
â”‚     â”œâ”€â”€â–º Kategorilere gÃ¶z atar                              â”‚
â”‚     â”‚                                                       â”‚
â”‚     â–¼                                                       â”‚
â”‚  3. Ä°lan detayÄ±na tÄ±klar                                    â”‚
â”‚     â”‚                                                       â”‚
â”‚     â–¼                                                       â”‚
â”‚  4. "Mesaj GÃ¶nder" veya "SatÄ±n Al" tÄ±klar                  â”‚
â”‚     â”‚                                                       â”‚
â”‚     â–¼                                                       â”‚
â”‚  5. GiriÅŸ/KayÄ±t sayfasÄ±na yÃ¶nlendirilir                    â”‚
â”‚     â”‚                                                       â”‚
â”‚     â”œâ”€â”€â–º KayÄ±t olur â†’ Ã–ÄŸrenci aktÃ¶rÃ¼ne dÃ¶nÃ¼ÅŸÃ¼r            â”‚
â”‚     â”‚                                                       â”‚
â”‚     â””â”€â”€â–º GiriÅŸ yapar â†’ Ã–ÄŸrenci aktÃ¶rÃ¼ne dÃ¶nÃ¼ÅŸÃ¼r           â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ArayÃ¼z Gereksinimleri

| BileÅŸen | GÃ¶rÃ¼nÃ¼rlÃ¼k | Durum |
|:--------|:-----------|:------|
| Header - Logo | âœ… GÃ¶rÃ¼nÃ¼r | TÄ±klanabilir |
| Header - Arama | âœ… GÃ¶rÃ¼nÃ¼r | Aktif |
| Header - GiriÅŸ Yap | âœ… GÃ¶rÃ¼nÃ¼r | Aktif |
| Header - KayÄ±t Ol | âœ… GÃ¶rÃ¼nÃ¼r | Aktif |
| Header - Ä°lan Ver | âœ… GÃ¶rÃ¼nÃ¼r | TÄ±klanÄ±nca giriÅŸ sayfasÄ±na yÃ¶nlendir |
| Ä°lan KartlarÄ± | âœ… GÃ¶rÃ¼nÃ¼r | TÄ±klanabilir |
| Favori Butonu | âœ… GÃ¶rÃ¼nÃ¼r | TÄ±klanÄ±nca giriÅŸ sayfasÄ±na yÃ¶nlendir |
| Mesaj Butonu | âœ… GÃ¶rÃ¼nÃ¼r | TÄ±klanÄ±nca giriÅŸ sayfasÄ±na yÃ¶nlendir |
| SatÄ±n Al Butonu | âœ… GÃ¶rÃ¼nÃ¼r | TÄ±klanÄ±nca giriÅŸ sayfasÄ±na yÃ¶nlendir |

---

### 2.3.2 ğŸ“ Ã–ÄŸrenci (Student)

#### Genel Bilgiler

| Ã–zellik | DeÄŸer |
|:--------|:------|
| **TanÄ±m** | .edu.tr email ile kayÄ±t olmuÅŸ ve doÄŸrulanmÄ±ÅŸ Ã¼niversite Ã¶ÄŸrencisi |
| **Hedef** | ÃœrÃ¼n almak ve/veya satmak |
| **Kimlik DoÄŸrulama** | Email + Åifre (JWT) |
| **Oturum** | 7 gÃ¼n (refresh token ile uzatÄ±labilir) |

#### Alt Roller

Ã–ÄŸrenci aktÃ¶rÃ¼, sistemde iki farklÄ± rol Ã¼stlenebilir:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Ã–ÄRENCÄ° ALT ROLLERÄ°                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚                       ğŸ“ Ã–ÄŸrenci                            â”‚
â”‚                           â”‚                                 â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚              â”‚                         â”‚                    â”‚
â”‚              â–¼                         â–¼                    â”‚
â”‚        ğŸ·ï¸ SatÄ±cÄ±                  ğŸ›’ AlÄ±cÄ±                 â”‚
â”‚        (Seller)                   (Buyer)                   â”‚
â”‚              â”‚                         â”‚                    â”‚
â”‚              â”‚                         â”‚                    â”‚
â”‚   â€¢ Ä°lan oluÅŸturur          â€¢ Ä°lan gÃ¶rÃ¼ntÃ¼ler              â”‚
â”‚   â€¢ Ä°lan dÃ¼zenler           â€¢ Mesaj gÃ¶nderir               â”‚
â”‚   â€¢ Mesajlara yanÄ±t verir   â€¢ SatÄ±n alÄ±r                   â”‚
â”‚   â€¢ Ã–deme alÄ±r              â€¢ Ã–deme yapar                  â”‚
â”‚                                                             â”‚
â”‚   ğŸ“Œ Not: Bir Ã¶ÄŸrenci aynÄ± anda hem satÄ±cÄ± hem alÄ±cÄ±       â”‚
â”‚      olabilir (farklÄ± ilanlarda)                           â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Yetkiler ve KÄ±sÄ±tlamalar

| Yetki | Durum | KoÅŸul |
|:------|:-----:|:------|
| Misafir tÃ¼m yetkileri | âœ… | - |
| Ä°lan oluÅŸturma | âœ… | Email doÄŸrulanmÄ±ÅŸ olmalÄ± |
| Ä°lan dÃ¼zenleme | âœ… | Sadece kendi ilanÄ± |
| Ä°lan silme | âœ… | Sadece kendi ilanÄ±, satÄ±lmamÄ±ÅŸ |
| Mesaj gÃ¶nderme | âœ… | Kendi ilanÄ±na mesaj gÃ¶nderemez |
| MesajlarÄ± gÃ¶rÃ¼ntÃ¼leme | âœ… | Sadece kendi konuÅŸmalarÄ± |
| SatÄ±n alma | âœ… | Kendi ilanÄ±nÄ± alamaz |
| Favorilere ekleme | âœ… | - |
| Favorilerden Ã§Ä±karma | âœ… | - |
| Ä°lan raporlama | âœ… | AynÄ± ilanÄ± 1 kez |
| Profil dÃ¼zenleme | âœ… | Sadece kendi profili |
| Åifre deÄŸiÅŸtirme | âœ… | - |
| Bildirimleri gÃ¶rme | âœ… | Sadece kendi bildirimleri |
| Admin paneline eriÅŸim | âŒ | Admin yetkisi gerekli |

#### Ã–ÄŸrenci DurumlarÄ± (States)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Ã–ÄRENCÄ° DURUMLARI                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚  â”‚   KAYITLI    â”‚  Email doÄŸrulanmamÄ±ÅŸ                      â”‚
â”‚  â”‚  (Pending)   â”‚  â€¢ Sadece gÃ¶rÃ¼ntÃ¼leme yapabilir           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â€¢ Ä°lan/mesaj/satÄ±n alma yapamaz          â”‚
â”‚         â”‚                                                   â”‚
â”‚         â”‚ Email doÄŸrulama                                   â”‚
â”‚         â–¼                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚  â”‚    AKTÄ°F     â”‚  Tam yetkili                              â”‚
â”‚  â”‚   (Active)   â”‚  â€¢ TÃ¼m Ã¶ÄŸrenci iÅŸlemlerini yapabilir      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚         â”‚                                                   â”‚
â”‚         â”‚ Admin ban iÅŸlemi                                  â”‚
â”‚         â–¼                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚  â”‚   YASAKLI    â”‚  KÄ±sÄ±tlÄ± eriÅŸim                           â”‚
â”‚  â”‚   (Banned)   â”‚  â€¢ Sadece gÃ¶rÃ¼ntÃ¼leme yapabilir           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â€¢ Ä°lan/mesaj/satÄ±n alma yapamaz          â”‚
â”‚         â”‚                                                   â”‚
â”‚         â”‚ Ban sÃ¼resi dolar veya Admin kaldÄ±rÄ±r             â”‚
â”‚         â–¼                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚  â”‚    AKTÄ°F     â”‚                                           â”‚
â”‚  â”‚   (Active)   â”‚                                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### VeritabanÄ± Temsili
```sql
-- Ã–ÄŸrenci (users tablosu)
CREATE TABLE users (
    id              UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    email           VARCHAR(255) UNIQUE NOT NULL,  -- .edu.tr zorunlu
    full_name       VARCHAR(100) NOT NULL,
    avatar_url      TEXT,
    university      VARCHAR(100),
    phone           VARCHAR(20),
    bio             VARCHAR(500),
    is_verified     BOOLEAN DEFAULT FALSE,         -- Email doÄŸrulandÄ± mÄ±
    is_admin        BOOLEAN DEFAULT FALSE,         -- Admin mi
    is_banned       BOOLEAN DEFAULT FALSE,         -- YasaklÄ± mÄ±
    ban_reason      TEXT,
    ban_until       TIMESTAMP,
    created_at      TIMESTAMP DEFAULT NOW(),
    updated_at      TIMESTAMP DEFAULT NOW()
);

-- Constraint: Sadece .edu.tr
ALTER TABLE users ADD CONSTRAINT chk_edu_email 
CHECK (email ~* '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.edu\.tr$');
```

#### ArayÃ¼z Gereksinimleri

| BileÅŸen | GÃ¶rÃ¼nÃ¼rlÃ¼k | Durum |
|:--------|:-----------|:------|
| Header - Profil MenÃ¼sÃ¼ | âœ… GÃ¶rÃ¼nÃ¼r | Avatar + Dropdown |
| Header - Bildirimler | âœ… GÃ¶rÃ¼nÃ¼r | Badge ile sayÄ± |
| Header - Mesajlar | âœ… GÃ¶rÃ¼nÃ¼r | Badge ile sayÄ± |
| Header - Ä°lan Ver | âœ… GÃ¶rÃ¼nÃ¼r | Aktif (doÄŸrulanmÄ±ÅŸsa) |
| Sidebar - Ä°lanlarÄ±m | âœ… GÃ¶rÃ¼nÃ¼r | - |
| Sidebar - Favorilerim | âœ… GÃ¶rÃ¼nÃ¼r | - |
| Sidebar - MesajlarÄ±m | âœ… GÃ¶rÃ¼nÃ¼r | - |
| Sidebar - SatÄ±n AlÄ±mlarÄ±m | âœ… GÃ¶rÃ¼nÃ¼r | - |
| Sidebar - SatÄ±ÅŸlarÄ±m | âœ… GÃ¶rÃ¼nÃ¼r | - |
| Sidebar - Ayarlar | âœ… GÃ¶rÃ¼nÃ¼r | - |

---

### 2.3.3 ğŸ›¡ï¸ Admin (Administrator)

#### Genel Bilgiler

| Ã–zellik | DeÄŸer |
|:--------|:------|
| **TanÄ±m** | Sistem yÃ¶netim yetkisine sahip kullanÄ±cÄ± |
| **Hedef** | Platformu gÃ¼venli ve dÃ¼zenli tutmak |
| **Kimlik DoÄŸrulama** | Email + Åifre (JWT) + is_admin flag |
| **Oturum** | 7 gÃ¼n |
| **Atama** | Sadece veritabanÄ±ndan (UI'dan deÄŸil) |

#### Yetkiler ve KÄ±sÄ±tlamalar

| Yetki | Durum | AÃ§Ä±klama |
|:------|:-----:|:---------|
| Ã–ÄŸrenci tÃ¼m yetkileri | âœ… | Admin aynÄ± zamanda Ã¶ÄŸrenci |
| Bekleyen ilanlarÄ± listeleme | âœ… | Pending status |
| Ä°lan onaylama | âœ… | pending â†’ active |
| Ä°lan reddetme | âœ… | pending â†’ rejected |
| Aktif ilan kaldÄ±rma | âœ… | active â†’ removed |
| TÃ¼m ilanlarÄ± gÃ¶rme | âœ… | Her durumda |
| RaporlarÄ± listeleme | âœ… | - |
| Rapor iÅŸleme | âœ… | Resolve, dismiss |
| KullanÄ±cÄ±larÄ± listeleme | âœ… | - |
| KullanÄ±cÄ± banlama | âœ… | SÃ¼re + sebep |
| KullanÄ±cÄ± ban kaldÄ±rma | âœ… | - |
| Kategori oluÅŸturma | âœ… | - |
| Kategori dÃ¼zenleme | âœ… | - |
| Kategori silme | âœ… | Ä°lan yoksa |
| Dashboard gÃ¶rÃ¼ntÃ¼leme | âœ… | Ä°statistikler |
| BaÅŸka admin oluÅŸturma | âŒ | Sadece DB'den |

#### Admin Ä°ÅŸlem AkÄ±ÅŸlarÄ±
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ADMÄ°N Ä°Å AKIÅLARI                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ğŸ“‹ Ä°LAN ONAY SÃœRECÄ°                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  Bekleyen Ä°lanlar â†’ Ä°nceleme â†’ Karar               â”‚   â”‚
â”‚  â”‚        â”‚                          â”‚                 â”‚   â”‚
â”‚  â”‚        â”‚                    â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”          â”‚   â”‚
â”‚  â”‚        â”‚                    â”‚           â”‚          â”‚   â”‚
â”‚  â”‚        â”‚                 ONAYLA      REDDET        â”‚   â”‚
â”‚  â”‚        â”‚                    â”‚           â”‚          â”‚   â”‚
â”‚  â”‚        â”‚                    â–¼           â–¼          â”‚   â”‚
â”‚  â”‚        â”‚               [active]    [rejected]      â”‚   â”‚
â”‚  â”‚        â”‚                    â”‚           â”‚          â”‚   â”‚
â”‚  â”‚        â”‚                    â–¼           â–¼          â”‚   â”‚
â”‚  â”‚        â”‚              KullanÄ±cÄ±ya   KullanÄ±cÄ±ya    â”‚   â”‚
â”‚  â”‚        â”‚              bildirim +    bildirim +     â”‚   â”‚
â”‚  â”‚        â”‚              email         email (sebep)  â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  ğŸš¨ RAPOR Ä°NCELEME SÃœRECÄ°                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  Raporlar â†’ Ä°nceleme â†’ Karar                       â”‚   â”‚
â”‚  â”‚      â”‚                    â”‚                         â”‚   â”‚
â”‚  â”‚      â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚   â”‚
â”‚  â”‚      â”‚          â”‚         â”‚         â”‚              â”‚   â”‚
â”‚  â”‚      â”‚       REDDET    Ä°LANI     KULLANICIYI       â”‚   â”‚
â”‚  â”‚      â”‚       (Dismiss) KALDIR    BANLA            â”‚   â”‚
â”‚  â”‚      â”‚          â”‚         â”‚         â”‚              â”‚   â”‚
â”‚  â”‚      â”‚          â–¼         â–¼         â–¼              â”‚   â”‚
â”‚  â”‚      â”‚      Rapor      Ä°lan      KullanÄ±cÄ±        â”‚   â”‚
â”‚  â”‚      â”‚      kapatÄ±lÄ±r  kaldÄ±rÄ±lÄ±r yasaklanÄ±r      â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Admin Panel SayfalarÄ±

| Sayfa | URL | AÃ§Ä±klama |
|:------|:----|:---------|
| Dashboard | `/admin` | Ä°statistikler, Ã¶zet |
| Bekleyen Ä°lanlar | `/admin/listings/pending` | Onay bekleyen ilanlar |
| TÃ¼m Ä°lanlar | `/admin/listings` | TÃ¼m ilanlar (filtrelenebilir) |
| Raporlar | `/admin/reports` | KullanÄ±cÄ± raporlarÄ± |
| KullanÄ±cÄ±lar | `/admin/users` | KullanÄ±cÄ± listesi |
| Kategoriler | `/admin/categories` | Kategori yÃ¶netimi |

#### VeritabanÄ± Temsili
```sql
-- Admin kontrolÃ¼ (users tablosunda is_admin flag)
-- Admin yetkisi sadece doÄŸrudan SQL ile verilebilir:
UPDATE users SET is_admin = TRUE WHERE email = 'admin@university.edu.tr';

-- Admin iÅŸlem loglarÄ± (opsiyonel)
CREATE TABLE admin_logs (
    id              UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    admin_id        UUID REFERENCES users(id),
    action          VARCHAR(50) NOT NULL,  -- 'approve_listing', 'ban_user', etc.
    target_type     VARCHAR(50),           -- 'listing', 'user', 'report'
    target_id       UUID,
    details         JSONB,
    created_at      TIMESTAMP DEFAULT NOW()
);
```

---

## 2.4 Ä°kincil AktÃ¶rler

### 2.4.1 âš™ï¸ Sistem (System)

#### Genel Bilgiler

| Ã–zellik | DeÄŸer |
|:--------|:------|
| **TanÄ±m** | Otomatik olarak Ã§alÄ±ÅŸan sistem iÅŸlemleri |
| **Tetikleme** | Cron job, Database trigger, Event |
| **Hedef** | Platform bakÄ±mÄ± ve otomasyonu |

#### Sistem GÃ¶revleri

| GÃ¶rev | Tetikleme | SÄ±klÄ±k | AÃ§Ä±klama |
|:------|:----------|:-------|:---------|
| Ä°lan sÃ¼resi kontrolÃ¼ | Cron | GÃ¼nlÃ¼k (00:00) | Expire olmuÅŸ ilanlarÄ± gÃ¼ncelle |
| SÃ¼re uyarÄ±sÄ± | Cron | GÃ¼nlÃ¼k (09:00) | 3 gÃ¼n kala bildirim gÃ¶nder |
| Bildirim gÃ¶nderimi | Event | AnlÄ±k | Realtime + push |
| Email gÃ¶nderimi | Event | AnlÄ±k | Transactional email |
| GÃ¶rÃ¼ntÃ¼lenme sayacÄ± | Trigger | AnlÄ±k | View count artÄ±rma |
| Session temizliÄŸi | Cron | HaftalÄ±k | Expire olmuÅŸ session'larÄ± sil |

#### Sistem Ä°ÅŸlem DiyagramÄ±
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SÄ°STEM Ä°ÅLEMLERÄ°                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â° ZAMANLANMIÅ GÃ–REVLER (Cron Jobs)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  00:00 â”€â–º Ä°lan SÃ¼resi KontrolÃ¼                     â”‚   â”‚
â”‚  â”‚           â”‚                                         â”‚   â”‚
â”‚  â”‚           â”œâ”€â–º expires_at < NOW() olan ilanlarÄ± bul â”‚   â”‚
â”‚  â”‚           â”œâ”€â–º status = 'expired' yap               â”‚   â”‚
â”‚  â”‚           â””â”€â–º KullanÄ±cÄ±ya bildirim gÃ¶nder          â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  09:00 â”€â–º SÃ¼re Dolum UyarÄ±sÄ±                       â”‚   â”‚
â”‚  â”‚           â”‚                                         â”‚   â”‚
â”‚  â”‚           â”œâ”€â–º 3 gÃ¼n iÃ§inde dolacak ilanlarÄ± bul    â”‚   â”‚
â”‚  â”‚           â””â”€â–º KullanÄ±cÄ±ya uyarÄ± gÃ¶nder             â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  03:00 â”€â–º VeritabanÄ± BakÄ±mÄ± (HaftalÄ±k)             â”‚   â”‚
â”‚  â”‚           â”‚                                         â”‚   â”‚
â”‚  â”‚           â”œâ”€â–º Eski bildirimleri temizle (90 gÃ¼n)   â”‚   â”‚
â”‚  â”‚           â””â”€â–º Eski session'larÄ± sil                â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  âš¡ EVENT BAZLI Ä°ÅLEMLER (Triggers)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  ON INSERT message â”€â–º Realtime bildirim gÃ¶nder     â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  ON UPDATE listing.status â”€â–º Bildirim + Email      â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  ON INSERT transaction â”€â–º Ã–deme bildirimi          â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  ON SELECT listing â”€â–º view_count++                 â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 2.4.2 ğŸ’³ Iyzico (Ã–deme Servisi)

#### Genel Bilgiler

| Ã–zellik | DeÄŸer |
|:--------|:------|
| **TanÄ±m** | Harici Ã¶deme iÅŸleme servisi |
| **Entegrasyon** | REST API |
| **Ortam** | Sandbox (test) / Production |
| **GÃ¼venlik** | PCI-DSS uyumlu, 3D Secure |

#### EtkileÅŸim NoktalarÄ±

| Ä°ÅŸlem | YÃ¶n | AÃ§Ä±klama |
|:------|:----|:---------|
| Ã–deme baÅŸlatma | Sistem â†’ Iyzico | Payment request |
| 3D Secure yÃ¶nlendirme | Iyzico â†’ KullanÄ±cÄ± | Banka doÄŸrulama |
| Ã–deme sonucu | Iyzico â†’ Sistem | Callback/Webhook |
| Ã–deme sorgulama | Sistem â†’ Iyzico | Status check |
| Ä°ade iÅŸlemi | Sistem â†’ Iyzico | Refund request |

#### Iyzico Entegrasyon AkÄ±ÅŸÄ±
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  IYZICO ENTEGRASYON AKIÅI                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ AlÄ±cÄ±  â”‚     â”‚Next.js â”‚     â”‚ Iyzico â”‚     â”‚ Banka  â”‚  â”‚
â”‚  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â”‚
â”‚      â”‚              â”‚              â”‚              â”‚        â”‚
â”‚      â”‚ 1. SatÄ±n Al  â”‚              â”‚              â”‚        â”‚
â”‚      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚              â”‚              â”‚        â”‚
â”‚      â”‚              â”‚              â”‚              â”‚        â”‚
â”‚      â”‚              â”‚ 2. Create    â”‚              â”‚        â”‚
â”‚      â”‚              â”‚    Payment   â”‚              â”‚        â”‚
â”‚      â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚              â”‚        â”‚
â”‚      â”‚              â”‚              â”‚              â”‚        â”‚
â”‚      â”‚              â”‚ 3. 3D Secure â”‚              â”‚        â”‚
â”‚      â”‚              â”‚    URL       â”‚              â”‚        â”‚
â”‚      â”‚              â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚              â”‚        â”‚
â”‚      â”‚              â”‚              â”‚              â”‚        â”‚
â”‚      â”‚ 4. Redirect  â”‚              â”‚              â”‚        â”‚
â”‚      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚              â”‚              â”‚        â”‚
â”‚      â”‚              â”‚              â”‚              â”‚        â”‚
â”‚      â”‚ 5. 3D Secure DoÄŸrulama     â”‚              â”‚        â”‚
â”‚      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º        â”‚
â”‚      â”‚              â”‚              â”‚              â”‚        â”‚
â”‚      â”‚              â”‚              â”‚ 6. SonuÃ§     â”‚        â”‚
â”‚      â”‚              â”‚              â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚        â”‚
â”‚      â”‚              â”‚              â”‚              â”‚        â”‚
â”‚      â”‚              â”‚ 7. Callback  â”‚              â”‚        â”‚
â”‚      â”‚              â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚              â”‚        â”‚
â”‚      â”‚              â”‚              â”‚              â”‚        â”‚
â”‚      â”‚ 8. SonuÃ§     â”‚              â”‚              â”‚        â”‚
â”‚      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚              â”‚              â”‚        â”‚
â”‚      â”‚              â”‚              â”‚              â”‚        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### API Endpoints

| Endpoint | Method | KullanÄ±m |
|:---------|:-------|:---------|
| `/payment/auth` | POST | 3D Secure Ã¶deme baÅŸlatma |
| `/payment/detail` | GET | Ã–deme detayÄ± sorgulama |
| `/payment/refund` | POST | Ä°ade iÅŸlemi |

---

### 2.4.3 ğŸ“§ Email Servisi (Resend/SendGrid)

#### Genel Bilgiler

| Ã–zellik | DeÄŸer |
|:--------|:------|
| **TanÄ±m** | Transactional email gÃ¶nderim servisi |
| **Servis** | Resend veya Supabase built-in |
| **Entegrasyon** | REST API / SMTP |

#### Email TÃ¼rleri

| Email TÃ¼rÃ¼ | Tetikleme | Åablon |
|:-----------|:----------|:-------|
| Email DoÄŸrulama | KayÄ±t sonrasÄ± | `verify-email` |
| Åifre SÄ±fÄ±rlama | Talep Ã¼zerine | `reset-password` |
| Ä°lan OnaylandÄ± | Admin onayÄ± | `listing-approved` |
| Ä°lan Reddedildi | Admin reddi | `listing-rejected` |
| Yeni Mesaj | Mesaj alÄ±ndÄ±ÄŸÄ±nda | `new-message` |
| SatÄ±ÅŸ Bildirimi | Ã–deme tamamlandÄ±ÄŸÄ±nda | `sale-complete` |
| SatÄ±n Alma Bildirimi | Ã–deme tamamlandÄ±ÄŸÄ±nda | `purchase-complete` |
| Ä°lan SÃ¼resi UyarÄ±sÄ± | 3 gÃ¼n kala | `listing-expiring` |
| Ä°lan SÃ¼resi Doldu | Expire olduÄŸunda | `listing-expired` |

---

### 2.4.4 ğŸ—„ï¸ Supabase (Backend Servisi)

#### Genel Bilgiler

| Ã–zellik | DeÄŸer |
|:--------|:------|
| **TanÄ±m** | Backend-as-a-Service platformu |
| **Servisler** | Auth, Database, Storage, Realtime, Edge Functions |
| **Entegrasyon** | JavaScript SDK |

#### Supabase Servisleri
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SUPABASE SERVÄ°SLERÄ°                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ğŸ” AUTH                                                    â”‚
â”‚  â”œâ”€ Email/Password authentication                          â”‚
â”‚  â”œâ”€ Email verification                                     â”‚
â”‚  â”œâ”€ Password reset                                         â”‚
â”‚  â””â”€ JWT token management                                   â”‚
â”‚                                                             â”‚
â”‚  ğŸ—„ï¸ DATABASE (PostgreSQL)                                  â”‚
â”‚  â”œâ”€ TÃ¼m veri tablolarÄ±                                     â”‚
â”‚  â”œâ”€ Row Level Security (RLS)                               â”‚
â”‚  â”œâ”€ Database functions                                     â”‚
â”‚  â””â”€ Triggers                                               â”‚
â”‚                                                             â”‚
â”‚  ğŸ“ STORAGE                                                 â”‚
â”‚  â”œâ”€ Ä°lan fotoÄŸraflarÄ±                                      â”‚
â”‚  â”œâ”€ Profil fotoÄŸraflarÄ±                                    â”‚
â”‚  â””â”€ Public/Private bucket'lar                              â”‚
â”‚                                                             â”‚
â”‚  ğŸ”„ REALTIME                                                â”‚
â”‚  â”œâ”€ MesajlaÅŸma                                             â”‚
â”‚  â”œâ”€ Bildirimler                                            â”‚
â”‚  â””â”€ Presence (online durumu)                               â”‚
â”‚                                                             â”‚
â”‚  âš¡ EDGE FUNCTIONS                                          â”‚
â”‚  â”œâ”€ Iyzico webhook handler                                 â”‚
â”‚  â”œâ”€ Cron jobs                                              â”‚
â”‚  â””â”€ Custom API endpoints                                   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2.5 AktÃ¶r HiyerarÅŸisi
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AKTÃ–R HÄ°YERARÅÄ°SÄ°                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚                                                             â”‚
â”‚                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚                      â”‚   Â«actorÂ»     â”‚                      â”‚
â”‚                      â”‚   Misafir     â”‚                      â”‚
â”‚                      â”‚   KullanÄ±cÄ±   â”‚                      â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                              â”‚                              â”‚
â”‚                              â”‚ Â«extendsÂ»                    â”‚
â”‚                              â”‚                              â”‚
â”‚                      â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚                      â”‚   Â«actorÂ»     â”‚                      â”‚
â”‚                      â”‚   Ã–ÄŸrenci     â”‚                      â”‚
â”‚                      â”‚               â”‚                      â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                              â”‚                              â”‚
â”‚                              â”‚ Â«extendsÂ»                    â”‚
â”‚                              â”‚                              â”‚
â”‚                      â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚                      â”‚   Â«actorÂ»     â”‚                      â”‚
â”‚                      â”‚    Admin      â”‚                      â”‚
â”‚                      â”‚               â”‚                      â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                             â”‚
â”‚  ğŸ“Œ KALITIM AÃ‡IKLAMASI                                      â”‚
â”‚                                                             â”‚
â”‚  â€¢ Ã–ÄŸrenci, Misafir'in tÃ¼m yetkilerini miras alÄ±r          â”‚
â”‚    + Ä°lan oluÅŸturma, mesajlaÅŸma, satÄ±n alma                â”‚
â”‚                                                             â”‚
â”‚  â€¢ Admin, Ã–ÄŸrenci'nin tÃ¼m yetkilerini miras alÄ±r           â”‚
â”‚    + Ä°lan yÃ¶netimi, kullanÄ±cÄ± yÃ¶netimi, moderasyon         â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2.6 AktÃ¶r-Use Case Matrisi

| Use Case | Misafir | Ã–ÄŸrenci | Admin | Sistem |
|:---------|:-------:|:-------:|:-----:|:------:|
| Ä°lanlarÄ± Listele | âœ… | âœ… | âœ… | - |
| Ä°lan Detay GÃ¶r | âœ… | âœ… | âœ… | - |
| Ara ve Filtrele | âœ… | âœ… | âœ… | - |
| KayÄ±t Ol | âœ… | - | - | - |
| GiriÅŸ Yap | âœ… | - | - | - |
| Email DoÄŸrula | âœ… | - | - | - |
| Ä°lan OluÅŸtur | - | âœ… | âœ… | - |
| Ä°lan DÃ¼zenle | - | âœ… | âœ… | - |
| Ä°lan Sil | - | âœ… | âœ… | - |
| Mesaj GÃ¶nder | - | âœ… | âœ… | - |
| KonuÅŸmalarÄ± Listele | - | âœ… | âœ… | - |
| SatÄ±n Al | - | âœ… | âœ… | - |
| Favorilere Ekle | - | âœ… | âœ… | - |
| Ä°lan Raporla | - | âœ… | âœ… | - |
| Profil YÃ¶net | - | âœ… | âœ… | - |
| Bildirimleri GÃ¶r | - | âœ… | âœ… | - |
| Ä°lan Onayla | - | - | âœ… | - |
| Ä°lan Reddet | - | - | âœ… | - |
| Ä°lan KaldÄ±r | - | - | âœ… | - |
| RaporlarÄ± Ä°ncele | - | - | âœ… | - |
| KullanÄ±cÄ± Listele | - | - | âœ… | - |
| KullanÄ±cÄ± Banla | - | - | âœ… | - |
| Kategori YÃ¶net | - | - | âœ… | - |
| Dashboard GÃ¶r | - | - | âœ… | - |
| Ä°lan SÃ¼resi KontrolÃ¼ | - | - | - | âœ… |
| Bildirim GÃ¶nder | - | - | - | âœ… |
| Email GÃ¶nder | - | - | - | âœ… |

---

## 2.7 Ã–zet
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       AKTÃ–RLER Ã–ZETÄ°                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ğŸ‘¥ BÄ°RÄ°NCÄ°L AKTÃ–RLER (3)                                   â”‚
â”‚  â”œâ”€ ğŸ‘¤ Misafir KullanÄ±cÄ±: GÃ¶rÃ¼ntÃ¼leme, kayÄ±t               â”‚
â”‚  â”œâ”€ ğŸ“ Ã–ÄŸrenci: AlÄ±m-satÄ±m, mesajlaÅŸma                     â”‚
â”‚  â””â”€ ğŸ›¡ï¸ Admin: Moderasyon, yÃ¶netim                          â”‚
â”‚                                                             â”‚
â”‚  âš™ï¸ Ä°KÄ°NCÄ°L AKTÃ–RLER (4)                                    â”‚
â”‚  â”œâ”€ âš™ï¸ Sistem: Cron jobs, triggers                         â”‚
â”‚  â”œâ”€ ğŸ’³ Iyzico: Ã–deme iÅŸleme                                â”‚
â”‚  â”œâ”€ ğŸ“§ Email Servisi: Transactional email                  â”‚
â”‚  â””â”€ ğŸ—„ï¸ Supabase: Auth, DB, Storage, Realtime              â”‚
â”‚                                                             â”‚
â”‚  ğŸ“Š YETKÄ° HÄ°YERARÅÄ°SÄ°                                       â”‚
â”‚  Misafir < Ã–ÄŸrenci < Admin                                  â”‚
â”‚                                                             â”‚
â”‚  ğŸ“Œ TOPLAM USE CASE SAYISI                                  â”‚
â”‚  â”œâ”€ Misafir: 6                                             â”‚
â”‚  â”œâ”€ Ã–ÄŸrenci: 12 (+6 miras)                                 â”‚
â”‚  â”œâ”€ Admin: 8 (+18 miras)                                   â”‚
â”‚  â””â”€ Sistem: 3                                              â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

[[3. Fonksiyonel Gereksinimler]]